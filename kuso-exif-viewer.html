<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEO-TOKYO // EXIF_DECK</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/exif-js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <style>
        /* Cyberpunk Theme Configuration */
        :root {
            --cyber-dark: #050a0e;
            --cyber-bg-frame: #111827;
            --cyber-cyan: #00fff9;
            --cyber-pink: #fe0056;
            --cyber-yellow: #fcec0c;
            --cyber-green: #39ff14;
            --cyber-text: #e0f7fa;
        }

        body {
            background-color: var(--cyber-dark);
            color: var(--cyber-text);
            font-family: 'Share Tech Mono', 'Noto Sans TC', monospace;
            overflow-x: hidden;
        }

        /* Glitch Effect Classes & Utils */
        .cyber-border {
            position: relative;
        }
        
        .cyber-border::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            border-radius: 0.5rem;
            pointer-events: none;
            z-index: 10;
        }

        .border-cyan::before { border: 1px solid var(--cyber-cyan); box-shadow: 0 0 5px var(--cyber-cyan); }
        .border-pink::before { border: 1px solid var(--cyber-pink); box-shadow: 0 0 5px var(--cyber-pink); }
        .border-yellow::before { border: 1px solid var(--cyber-yellow); box-shadow: 0 0 5px var(--cyber-yellow); }

        .scanline {
            width: 100%;
            height: 100px;
            z-index: 999;
            background: linear-gradient(0deg, rgba(0,0,0,0) 0%, rgba(0, 255, 249, 0.1) 50%, rgba(0,0,0,0) 100%);
            opacity: 0.1;
            position: fixed;
            bottom: 100%;
            animation: scanline 10s linear infinite;
            pointer-events: none;
        }

        @keyframes scanline {
            0% { bottom: 100%; }
            100% { bottom: -100px; }
        }

        .text-glow-cyan { text-shadow: 0 0 5px var(--cyber-cyan); }
        .text-glow-pink { text-shadow: 0 0 5px var(--cyber-pink); }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--cyber-dark); }
        ::-webkit-scrollbar-thumb { background: var(--cyber-bg-frame); border: 1px solid var(--cyber-cyan); }
        ::-webkit-scrollbar-thumb:hover { background: var(--cyber-cyan); }

        .hidden-file-input { display: none; }
    </style>
</head>
<body class="min-h-screen flex flex-col p-4 md:p-8">

    <div class="scanline"></div>

    <!-- Header -->
    <header class="text-center mb-8 border-b border-gray-800 pb-4">
        <h1 class="text-3xl md:text-5xl font-bold text-cyan-400 text-glow-cyan tracking-tighter">
            [ N E O - T O K Y O // E X I F _ D E C K ]
        </h1>
        <p class="text-xs text-gray-500 mt-2">SYSTEM v2.077 // READY FOR INPUT</p>
    </header>

    <!-- Main Container -->
    <main class="flex-grow max-w-7xl mx-auto w-full grid grid-cols-1 lg:grid-cols-2 gap-8">
        
        <!-- Left Column: Preview & Basic Info -->
        <div class="space-y-6">
            
            <!-- Drop Zone / Image Preview -->
            <div id="drop-zone" class="cyber-border border-cyan bg-gray-900 h-96 relative flex items-center justify-center cursor-pointer overflow-hidden group transition-all duration-300 hover:bg-gray-800">
                <input type="file" id="file-input" class="hidden-file-input" accept="image/jpeg,image/jpg,image/png,image/webp" multiple>
                
                <!-- Initial State -->
                <div id="drop-hint" class="text-center p-6 z-20">
                    <div class="text-cyan-400 text-6xl mb-4 group-hover:scale-110 transition-transform">ğŸ“‚</div>
                    <h3 class="text-xl text-cyan-400 font-bold">>> DRAG IMAGE HERE <<</h3>
                    <p class="text-gray-500 text-sm mt-2">[ OR CLICK TO BROWSE ]</p>
                </div>

                <!-- Preview Image (Hidden initially) -->
                <!-- Added onclick handler logic in JS to stop propagation -->
                <img id="preview-img" class="absolute inset-0 w-full h-full object-contain z-10 hidden p-2 bg-gray-900" src="" alt="Preview">
                
                <!-- Overlay on hover when image is loaded -->
                <div id="img-overlay" class="absolute inset-0 bg-black bg-opacity-50 z-30 hidden flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none">
                    <span class="text-cyan-300 font-bold border border-cyan-300 px-4 py-2 bg-black bg-opacity-70 tracking-widest">
                        [ CLICK TO OPEN ]
                    </span>
                </div>
            </div>

            <!-- Controls -->
            <div class="grid grid-cols-3 gap-4">
                <button id="btn-prev" class="bg-gray-800 border border-cyan-500 text-cyan-400 py-3 font-bold hover:bg-cyan-900 hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                    &lt; PREV
                </button>
                <button id="btn-export" class="bg-gray-800 border border-green-500 text-green-400 py-3 font-bold hover:bg-green-900 hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                    EXPORT .TXT
                </button>
                <button id="btn-next" class="bg-gray-800 border border-cyan-500 text-cyan-400 py-3 font-bold hover:bg-cyan-900 hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                    NEXT &gt;
                </button>
            </div>

            <!-- System Status -->
            <div class="bg-black border-l-2 border-yellow-400 p-2 font-mono text-xs text-yellow-300">
                <span id="status-text">SYSTEM STATUS: WAITING FOR USER INPUT...</span>
            </div>

        </div>

        <!-- Right Column: Data & Logs -->
        <div class="space-y-6">

            <!-- Gear List -->
            <div class="bg-gray-900 cyber-border border-yellow p-6 min-h-[200px]">
                <h2 class="text-yellow-300 text-xl font-bold mb-4 border-b border-gray-800 pb-2 flex justify-between">
                    <span>[ è£å‚™æ¸…å–® // GEAR_LIST ]</span>
                    <span class="text-xs self-center animate-pulse">â— REC</span>
                </h2>
                <div id="gear-content" class="text-gray-300 space-y-2 font-mono whitespace-pre-wrap leading-relaxed">
                    <!-- Data will be injected here -->
                    <span class="text-gray-600">NO DATA LOADED.</span>
                </div>
            </div>

            <!-- Exposure Data -->
            <div class="bg-gray-900 cyber-border border-pink p-6 min-h-[200px]">
                <h2 class="text-pink-500 text-xl font-bold mb-4 border-b border-gray-800 pb-2">
                    [ å‰ä¸–ä»Šç”Ÿ // EXPOSURE_DATA ]
                </h2>
                <div id="exposure-content" class="text-gray-300 space-y-2 font-mono whitespace-pre-wrap leading-relaxed">
                    <!-- Data will be injected here -->
                    <span class="text-gray-600">AWAITING TARGET...</span>
                </div>
            </div>

        </div>

    </main>

    <!-- Modal for Soul Quotes -->
    <div id="modal-quote" class="fixed inset-0 bg-black bg-opacity-90 z-50 hidden flex items-center justify-center p-4 backdrop-blur-sm">
        <div class="bg-gray-900 border-2 border-pink-500 max-w-lg w-full p-8 relative shadow-[0_0_20px_rgba(254,0,86,0.3)] transform transition-all scale-95 opacity-0" id="modal-inner">
            <div class="text-pink-500 font-bold mb-4 text-sm tracking-widest">// SYSTEM_OVERRIDE // éˆé­‚æ‹·å•ç¨‹åºå•Ÿå‹• //</div>
            <p id="quote-text" class="text-2xl md:text-3xl font-bold text-white leading-tight mb-8">
                <!-- Quote goes here -->
            </p>
            <div class="text-center">
                <button id="btn-close-modal" class="text-yellow-300 border border-yellow-300 px-6 py-2 hover:bg-yellow-300 hover:text-black font-bold transition-colors">
                    [ é—œé–‰å°è©± ]
                </button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="text-center mt-12 text-gray-600 text-xs pb-8">
        <p>&copy; 2077 CYBER_EXIF SYSTEMS. ALL RIGHTS RESERVED.</p>
        <div class="mt-6 pt-6 border-t border-gray-800 max-w-md mx-auto space-y-2">
            <p class="text-cyan-500 font-bold text-sm tracking-wider">ç¨‹å¼è¨­è¨ˆï¼šè³€ç¦ç¦æ”å½±æ•™å®¤</p>
            <p class="text-gray-400 font-mono">é€£çµ¡æ–¹å¼ï¼šhojenjen2018@gmail.com</p>
        </div>
    </footer>

    <script>
        // --- DATA RESOURCES ---
        const SOUL_QUOTES = [
            "ä½ ä¸æ˜¯å‡ç´šå™¨æï¼Œæ˜¯å»¶å¾Œé¢å°å¯¦åŠ›", "é˜²æ½®ç®±æ˜¯æ”å½±å¸«çš„å¤¢æƒ³å†°æ«ƒ", "å™¨æå…¨æ–°ï¼Œä½œå“å…¨ç„¡",
            "é¡é ­è¶Šè²´ï¼Œè¶Šä¸æ•¢å¸¶å‡ºé–€", "é¡é ­æ¯”ä½ çš„äººç”Ÿè¦åŠƒæ¸…æ¥š", "é–‹ç®±æ‹å¾—æ¯”ä½œå“èªçœŸ",
            "å™¨æè²·é½Šäº†ï¼Œæ‹ç…§é‚„åœ¨æ‰¾é¡Œæ", "ä½ ä¸æ˜¯å™¨æé»¨ï¼Œæ˜¯é€ƒé¿é»¨", "ç›¸æ©ŸçŸ¥é“ä½ å¾ˆçª®ï¼Œä½†ä½ è£ä½œä¸åœ¨ä¹",
            "æŠ€è¡“æ²’é€²æ­¥ï¼Œä½†é…ä»¶è¶Šä¾†è¶Šé½Š", "å…¨æ‰‹å‹•åªæ˜¯è®“éŒ¯èª¤æ›´æœ‰å°Šåš´", "ç”¨ M æ¨¡å¼æ‹çˆ›ï¼Œä¸æœƒæ¯”è¼ƒé«˜ç´š",
            "å…‰åœˆå…¨é–‹ä¸æ˜¯é¢¨æ ¼ï¼Œæ˜¯å¤±æ§", "å¿«é–€äº‚è½‰ï¼Œæ¨¡ç³Šç•¶å“²å­¸", "ISO çˆ†è¡¨ï¼Œå«æƒ…ç·’",
            "ä¸æœƒæ¸¬å…‰ï¼Œå»æ„›è«‡å…‰", "åƒæ•¸èƒŒå¾—ç†Ÿï¼Œç•«é¢é‚„æ˜¯æ­»", "ä½ åœ¨æ§åˆ¶ç›¸æ©Ÿï¼Œç›¸æ©Ÿåœ¨æ‡²ç½°ä½ ",
            "æ›å…‰è£œå„Ÿæ˜¯ä½ æœ€å¾Œçš„å¸Œæœ›", "ç™½å¹³è¡¡äº‚è·‘ï¼Œè‰²å½©é‚„æ•¢èªªã€Œè‡ªç„¶ã€", "æ¨¡ç³Šä¸æ˜¯è©©ï¼Œæ˜¯æ²’å°ç„¦",
            "é»‘ç™½ä¸æ˜¯æ·±åº¦ï¼Œæ˜¯é®ç¾", "æ¥µç°¡ä¸æ˜¯ä»€éº¼éƒ½æ²’æ‹åˆ°", "ç•™ç™½ç•™åˆ°åƒæ²’èµ°è¿‘",
            "å°ç¨±ä¸æ˜¯æ§‹åœ–ï¼Œæ˜¯æ€•å‡ºéŒ¯", "ä¸­å¤®æ§‹åœ–ç”¨ä¸€è¼©å­ï¼Œé‚„èªªæ˜¯é¢¨æ ¼", "å‰æ™¯äº‚æ”¾å«è¨­è¨ˆ",
            "å»£è§’è²¼è‡‰å«éœ‡æ’¼", "èƒŒæ™¯äº‚ä¸æ˜¯ç´€å¯¦ï¼Œæ˜¯ä¸è² è²¬", "çœ‹ä¸æ‡‚ä¸æ˜¯é«˜ç´šï¼Œæ˜¯æ²’èªªæ¸…æ¥š",
            "æ¨¡ç‰¹æ¼‚äº®ï¼Œä¸æ˜¯ä½ çš„åŠŸå‹", "æ•£æ™¯ä¸æ˜¯æƒ…æ„Ÿï¼Œæ˜¯èƒŒæ™¯ç³Šæ‰", "çœ¼ç¥ç©ºï¼Œä¸æ˜¯æ†‚é¬±ï¼Œæ˜¯æ²’å¼•å°",
            "æ¨¡ç‰¹åœ¨æ’ï¼Œä½ åœ¨è‡ªçˆ½", "å§¿å‹¢ä¸€æ¨£ï¼Œåªæ˜¯æ›äºº", "ä¿®çš®ä¿®åˆ°åƒå¡‘è† ï¼Œé‚„èªªçœŸå¯¦",
            "äººåƒä¸æ˜¯æ‹è‡‰éƒ¨è­‰ä»¶", "æ¨¡ç‰¹æ•‘äº†ä½ ï¼Œä½ é‚„ä»¥ç‚ºæ˜¯è‡ªå·±", "å·æ‹ä¸æ˜¯è¡—æ‹ï¼Œæ˜¯æ²’å‹‡æ°£",
            "è¢«æ‹’æ‹å°±èªªè‡ªå·±åœ¨åšè—è¡“", "å¾Œè£½ä¸æ˜¯å‰µä½œï¼Œæ˜¯æ€¥æ•‘", "æ¿¾é¡æ¯”å…§å®¹é‡",
            "é¡è‰²å¾ˆçŒ›ï¼Œæƒ…ç·’ç‚ºé›¶", "ä¿®åˆ°ä¸åƒäººï¼Œé‚„èªªè‡ªç„¶", "Lightroom ä¸æ˜¯è´–ç½ªåˆ¸",
            "ä¿®åœ–ä¿®åˆ°å¿˜è¨˜åŸæœ¬æƒ³æ‹ä»€éº¼", "å°æ¯”æ‹‰æ»¿ï¼Œæ•…äº‹æ¶ˆå¤±", "ä¸€éµé¢¨æ ¼ä¸æ˜¯é¢¨æ ¼",
            "HDR ä¸æ˜¯è®“äººçœ¼ç›æµè¡€", "å¾Œè£½æ™‚é–“æ¯”æ€è€ƒæ™‚é–“é•·", "æ²’é¢¨æ ¼ä¸å«å¤šå…ƒ",
            "æ¨¡ä»¿å¤ªåƒï¼Œå°±æ˜¯æŠ„", "æ¯å¼µéƒ½ä¸åŒï¼Œå…¶å¯¦éƒ½ä¸è¡Œ", "é»‘æš—ä¸æ˜¯æ·±æ²‰ï¼Œæ˜¯ç©º",
            "é¢¨æ ¼ä¸æ˜¯ä½ èªªäº†ç®—ï¼Œæ˜¯ä½œå“èªªäº†ç®—", "æ‹å¾ˆå¤šï¼Œä¸ä»£è¡¨æ‹å¾—å¥½", "å¿«é–€ç´¯ç©ï¼Œä¸ç­‰æ–¼æˆé•·",
            "ä½ èªªåœ¨æ‰¾é¢¨æ ¼ï¼Œå…¶å¯¦åœ¨æ‹–", "ä½œå“é›†åƒè·³èš¤å¸‚å ´", "ä½ è©²åˆªçš„æ¯”è©²ç•™çš„å¤š",
            "è®šå¤šä¸æ˜¯è­‰æ˜ï¼Œåªæ˜¯é‹æ°£", "è®šå°‘ä¹Ÿä¸ä»£è¡¨ä½ æ˜¯è—è¡“å®¶", "æ¼”ç®—æ³•ä¸æ˜¯ä½ çš„æ•µäººï¼Œæ˜¯ç…§å¦–é¡",
            "è¢«åˆ†äº«ä¸ä»£è¡¨è¢«ç†è§£", "æµé‡ä¾†å¾—å¿«ï¼Œä½ ä¹Ÿç©ºå¾—å¿«", "æ¨™ç±¤ä¸‹å¾—æº–ï¼Œç…§ç‰‡é‚„æ˜¯çˆ›",
            "æ–‡æ¡ˆæ¯”ç…§ç‰‡ç²¾å½©", "ç‚ºäº†æµé‡æ‹ï¼Œæœ€å¾Œåªå‰©æµé‡", "ç†±é–€æ§‹åœ–ä¸æ˜¯ä½ çš„é¢¨æ ¼",
            "æ¯å¼µéƒ½æƒ³çˆ†ï¼Œå…¶å¯¦æ²’ä¸€å¼µç«™å¾—ä½", "æ‹å¾ˆä¹…ï¼Œä¸ä»£è¡¨ä½ é€²æ­¥", "è€æ‰‹äº‚æ‹ï¼Œæ–°æ‰‹çœ‹ä¸å‡ºä¾†",
            "æ–°æ‰‹æ‹å¾—å¥½ï¼Œå°±æ˜¯å¥½", "è½ä¸é€²æ‰¹è©•çš„äººæœ€å±éšª", "ä¸€ç›´è¾¯è§£ï¼Œä»£è¡¨ä½ çŸ¥é“ä¸è¡Œ",
            "æ€ªå™¨æçš„äººä¸æƒ³é¢å°è‡ªå·±", "è‡ªç¨±è—è¡“å®¶çš„äººé€šå¸¸æœ€æ€•è¢«çœ‹æ‡‚", "æ”å½±ä¸æ˜¯é ­éŠœ",
            "æ‹ç…§ä¸æ˜¯é€ƒé¿æ€è€ƒ", "ç›¸æ©Ÿä¸æœƒå¹«ä½ åšé¸æ“‡", "å¥½ç…§ç‰‡ä¸ç”¨è§£é‡‹",
            "è§£é‡‹è¶Šå¤šï¼Œç…§ç‰‡è¶Šå¼±", "çœ‹ä¸å‡ºä½ æƒ³æ‹ä»€éº¼", "ã€Œæœ‰æ„Ÿè¦ºä½†èªªä¸å‡ºä¾†ã€ï¼æ²’å®Œæˆ",
            "æŠ€è¡“åˆ°ä½ï¼Œå…§å®¹ç¼ºå¸­", "æ‹å¾—æ¸…æ¥šï¼Œä¸ç­‰æ–¼æ‹å¾—å¥½", "ä½ å¾ˆåŠªåŠ›ï¼Œä½†ç…§ç‰‡æ²’æ”¶åˆ°",
            "ç›¸æ©Ÿå¾ˆé«˜ç´šï¼Œç…§ç‰‡å¾ˆæ™®é€š", "é€™å¼µä¸æ˜¯çˆ›ï¼Œæ˜¯æµªè²»", "æ²’å¤±æ•—ï¼Œä¸ä»£è¡¨æˆåŠŸ",
            "å¥½ç…§ç‰‡ä¸éœ€è¦å¾ˆå¤š", "åå¼µä¸€å¼µå°±å¾ˆå¼·", "åˆªç…§ç‰‡ä¹Ÿæ˜¯å‰µä½œ",
            "æ‹ç…§æ˜¯é¸æ“‡ï¼Œä¸æ˜¯å…¨æ”¶", "ä¸æ‹ï¼Œæœ‰æ™‚æ¯”äº‚æ‹å¥½", "ç›¸æ©Ÿæœƒéæ™‚ï¼Œçœ¼ç›ä¸æœƒ",
            "çœ‹å¾—å°‘ï¼Œæ‹å†å¤šéƒ½æ²’ç”¨", "ä½ æœ€å¾Œåªæœƒæ‹çµ¦è‡ªå·±çœ‹", "æ”å½±ä¸æ˜¯è­‰æ˜ä½ æœ‰å¤šå²å®³",
            "æ‹ç…§ï¼Œæœ€å¾Œæ˜¯åœ¨å°ä»˜è‡ªå·±"
        ];

        const BRAND_COMMENTS = {
            "canon": "Canonï¼ˆä½³èƒ½ï¼‰\nğŸ‘‰ ã€Œä½³èƒ½ï¼šå¤§å®¶ç¬¬ä¸€å°ç›¸æ©Ÿï¼Œè€å¸«ã€è¨˜è€…ã€å©šæ”éƒ½ç”¨å®ƒã€‚ã€",
            "nikon": "Nikonï¼ˆå°¼åº·ï¼‰\nğŸ‘‰ ã€Œå°¼åº·ï¼šæˆ‘ä¸è·Ÿæµè¡Œï¼Œæˆ‘åªè·Ÿå…‰ç·šè¬›é“ç†ã€‚ã€",
            "fujifilm": "Fujifilmï¼ˆå¯Œå£«ï¼‰\nğŸ‘‰ ã€Œå¯Œå£«ï¼šå“‡ï¼Œä½ æ˜¯å¯Œå®¶å­å¼Ÿï¼Œé€£é¡è‰²éƒ½å¾ˆæœ‰æ•™é¤Šã€‚ã€",
            "panasonic": "Panasonicï¼ˆæ¾ä¸‹ï¼‰\nğŸ‘‰ ã€Œæ¾ä¸‹ï¼šæˆ‘æ‹ç…§é‚„è¡Œï¼Œä½†æˆ‘å…¶å¯¦æ˜¯ä¾†æ‹é›»å½±çš„ã€‚ã€",
            "olympus": "OM System / Olympus\nğŸ‘‰ ã€Œå¥§æ—å·´æ–¯ï¼šæˆ‘å¾ˆå°ï¼Œä½†æˆ‘é™ªä½ ä¸Šå±±ä¸‹æµ·ã€‚ã€",
            "om digital": "OM System / Olympus\nğŸ‘‰ ã€Œå¥§æ—å·´æ–¯ï¼šæˆ‘å¾ˆå°ï¼Œä½†æˆ‘é™ªä½ ä¸Šå±±ä¸‹æµ·ã€‚ã€",
            "leica": "Leicaï¼ˆå¾ å¡ï¼‰\nğŸ‘‰ ã€Œå¾ å¡ï¼šä½ è²·çš„ä¸æ˜¯ç›¸æ©Ÿï¼Œæ˜¯ä¿¡ä»°èˆ‡ç´…é»ã€‚ã€",
            "pentax": "Pentaxï¼ˆè³“å¾—ï¼‰\nğŸ‘‰ ã€Œè³“å¾—ï¼šå¤§å®¶éƒ½å¿˜äº†æˆ‘ï¼Œä½†æˆ‘è‡ªå·±å¾ˆé©•å‚²ã€‚ã€",
            "hasselblad": "Hasselbladï¼ˆå“ˆè˜‡ï¼‰\nğŸ‘‰ ã€Œå“ˆè˜‡ï¼šæˆ‘ä¸€å¼µç…§ç‰‡ï¼Œç­‰æ–¼ä½ ä¸€å°é›»è…¦ã€‚ã€",
            "blackmagic": "Blackmagic Design\nğŸ‘‰ ã€ŒBlackmagicï¼šæ‹ç…§ï¼Ÿä¸ï¼Œæˆ‘åªæ´»åœ¨å‰ªæ¥è»Ÿé«”è£¡ã€‚ã€",
            "phase one": "Phase One\nğŸ‘‰ ã€ŒPhase Oneï¼šæ™®é€šäººä¸èªè­˜æˆ‘ï¼Œæœ‰éŒ¢äººä¸éœ€è¦è§£é‡‹ã€‚ã€",
            "gopro": "GoPro\nğŸ‘‰ ã€ŒGoProï¼šä½ åœ¨è·³å‚˜ï¼Œæˆ‘åœ¨å¹«ä½ ç•™éºç…§ã€‚ã€",
            "dji": "DJI\nğŸ‘‰ ã€ŒDJIï¼šæˆ‘æœ¬ä¾†æ˜¯ç„¡äººæ©Ÿï¼Œé †ä¾¿çµ±æ²»å½±åƒç•Œã€‚ã€",
            "insta360": "Insta360\nğŸ‘‰ ã€ŒInsta360ï¼šå…ˆæ‹å†èªªï¼Œåæ­£è§’åº¦ä¹‹å¾Œå†é¸ã€‚ã€",
            "kodak": "Kodakï¼ˆæŸ¯é”ï¼‰\nğŸ‘‰ ã€ŒæŸ¯é”ï¼šæˆ‘æ²’è½äº†ï¼Œä½†ä½ çš„é’æ˜¥æœ‰æˆ‘ã€‚ã€",
            "agfa": "AgfaPhoto\nğŸ‘‰ ã€ŒAgfaPhotoï¼šä½ ä¸çŸ¥é“æˆ‘æ˜¯èª°ï¼Œä½†æˆ‘ä¸€ç›´éƒ½åœ¨ã€‚ã€",
            "benq": "BenQï¼ˆæ˜åŸºï¼‰\nğŸ‘‰ ã€ŒBenQï¼šæˆ‘è¢å¹•å¾ˆå¼·ï¼Œç›¸æ©Ÿâ€¦ä¹Ÿç®—æœ‰èª æ„ã€‚ã€",
            "aigo": "Aigoï¼ˆæ„›åœ‹è€…ï¼‰\nğŸ‘‰ ã€ŒAigoï¼šåå­—å¾ˆç†±è¡€ï¼Œåƒ¹æ ¼æ›´ç†±è¡€ã€‚ã€",
            "flashback": "Flashback\nğŸ‘‰ ã€ŒFlashbackï¼šæˆ‘ä¸æ˜¯è€ï¼Œæ˜¯æ•…æ„å¾©å¤ã€‚ã€",
            "polaroid": "Polaroidï¼ˆå¯¶éº—ä¾†ï¼‰\nğŸ‘‰ ã€ŒPolaroidï¼šæ‹å®Œå°±å‡ºä¾†ï¼Œäººç”Ÿä¸èƒ½é‡ä¾†ã€‚ã€",
            "ricoh": "Ricohï¼ˆç†å…‰ï¼‰\nğŸ‘‰ ã€ŒRicohï¼šæ‡‚çš„äººå°±æ‡‚ï¼Œä¸æ‡‚çš„äººä¸€ç›´å•ç‚ºä»€éº¼ã€‚ã€",
            "rollei": "Rollei\nğŸ‘‰ ã€ŒRolleiï¼šå¾·åœ‹è€éˆé­‚ï¼Œæ•¸ä½æ–°èº«é«”ã€‚ã€",
            "vivitar": "Vivitar\nğŸ‘‰ ã€ŒVivitarï¼šåå­—å¾ˆéŸ¿ï¼Œå­˜åœ¨æ„Ÿå¾ˆä½›ã€‚ã€",
            "yashica": "Yashicaï¼ˆé›…è¥¿å¡ï¼‰\nğŸ‘‰ ã€ŒYashicaï¼šæˆ‘ä»¥å‰å¾ˆç´…ï¼Œç¾åœ¨é å›æ†¶ã€‚ã€",
            "z cam": "Z CAM\nğŸ‘‰ ã€ŒZ CAMï¼šä½ ä¸çŸ¥é“æˆ‘ï¼Œä½† Netflix å¯èƒ½çŸ¥é“ã€‚ã€",
            "apple": "Appleï¼ˆè˜‹æœï¼‰\nğŸ‘‰ ã€Œä½ è²·çš„ä¸æ˜¯æ‰‹æ©Ÿï¼Œæ˜¯ç”Ÿæ…‹ç³»å…¥å ´åˆ¸ã€‚ã€",
            "iphone": "Appleï¼ˆè˜‹æœï¼‰\nğŸ‘‰ ã€Œä½ è²·çš„ä¸æ˜¯æ‰‹æ©Ÿï¼Œæ˜¯ç”Ÿæ…‹ç³»å…¥å ´åˆ¸ã€‚ã€",
            "samsung": "Samsungï¼ˆä¸‰æ˜Ÿï¼‰\nğŸ‘‰ ã€Œå‹è™Ÿå¤šåˆ°é€£è‡ªå·±éƒ½éœ€è¦åˆ†é¡è¡¨ã€‚ã€",
            "google": "Googleï¼ˆPixelï¼‰\nğŸ‘‰ ã€Œç¡¬é«”æ™®é€šï¼Œä½†æˆ‘æ˜¯ AI è¦ªå…’å­ã€‚ã€",
            "pixel": "Googleï¼ˆPixelï¼‰\nğŸ‘‰ ã€Œç¡¬é«”æ™®é€šï¼Œä½†æˆ‘æ˜¯ AI è¦ªå…’å­ã€‚ã€",
            "xiaomi": "Xiaomiï¼ˆå°ç±³ï¼‰\nğŸ‘‰ ã€Œè¦æ ¼çµ¦æ»¿ï¼Œåƒ¹æ ¼çµ¦ç”œï¼Œåå­—ä¸€ç›´æ”¹ã€‚ã€",
            "oneplus": "OnePlusï¼ˆä¸€åŠ ï¼‰\nğŸ‘‰ ã€Œç•¶å¹´æ——è‰¦æ®ºæ‰‹ï¼Œç¾åœ¨è‡ªå·±è®Šæ——è‰¦ã€‚ã€",
            "motorola": "Motorolaï¼ˆæ‘©æ‰˜ç¾…æ‹‰ï¼‰\nğŸ‘‰ ã€Œæˆ‘é‚„æ´»è‘—ï¼Œè€Œä¸”æˆ‘æœƒæŠ˜ã€‚ã€",
            "vivo": "vivo\nğŸ‘‰ ã€Œæ‹äººåƒå¾ˆç¾ï¼Œåå­—æ°¸é æ‰“å°å¯«ã€‚ã€",
            "oppo": "OPPO\nğŸ‘‰ ã€Œå……é›»å¿«åˆ°ä½ é‚„æ²’æ‰¾å¥½æ’åº§å°±æ»¿äº†ã€‚ã€",
            "realme": "Realme\nğŸ‘‰ ã€Œæˆ‘å¹´è¼•ã€æˆ‘ä¾¿å®œã€æˆ‘ä¸€ç›´å‡ºæ–°æ©Ÿã€‚ã€",
            "iqoo": "iQOO\nğŸ‘‰ ã€Œæ€§èƒ½æ€ªç¸ï¼Œä½†åå­—åƒé›»ç«¶éšŠä¼ã€‚ã€",
            "nothing": "Nothing\nğŸ‘‰ ã€Œæˆ‘ä»€éº¼éƒ½æ²’æœ‰ï¼Œä½†ä½ å°±æ˜¯æœƒå¤šçœ‹å…©çœ¼ã€‚ã€",
            "infinix": "Infinix\nğŸ‘‰ ã€Œè¦æ ¼å¯«å¾—å¾ˆçŒ›ï¼Œåƒ¹æ ¼ä½åˆ°ä¸åƒçœŸçš„ã€‚ã€",
            "tecno": "Tecno\nğŸ‘‰ ã€Œä½ å¯èƒ½æ²’è½éæˆ‘ï¼Œä½†æˆ‘è³£å¾—æ¯”ä½ æƒ³åƒå¤šã€‚ã€",
            "honor": "Honorï¼ˆæ¦®è€€ï¼‰\nğŸ‘‰ ã€Œæˆ‘ä¸æ˜¯è¯ç‚ºï¼Œä½†å¤§å®¶ä¸€ç›´é€™æ¨£çœ‹æˆ‘ã€‚ã€",
            "nokia": "Nokiaï¼ˆè«¾åŸºäºï¼‰\nğŸ‘‰ ã€Œæ‰‹æ©Ÿæœƒå£ï¼Œä½†æˆ‘ä¸æœƒå€’ã€‚ã€",
            "htc": "HTC\nğŸ‘‰ ã€Œæˆ‘æ›¾ç¶“ç«™åœ¨ä¸–ç•Œä¹‹å·”ã€‚ã€",
            "sony": "Sonyï¼ˆç´¢å°¼ï¼‰\nğŸ‘‰ ã€ŒSonyï¼šå°ç„¦æ¯”ä½ äººç”Ÿç›®æ¨™é‚„å¿«ã€‚ã€"
        };

        // --- APP STATE ---
        let currentFiles = [];
        let currentIndex = -1;
        let currentExifCache = {};
        // Add counter for quotes
        let viewCount = 0;

        // --- DOM ELEMENTS ---
        const dropZone = document.getElementById('drop-zone');
        const fileInput = document.getElementById('file-input');
        const previewImg = document.getElementById('preview-img');
        const dropHint = document.getElementById('drop-hint');
        const imgOverlay = document.getElementById('img-overlay');
        const statusText = document.getElementById('status-text');
        
        const gearContent = document.getElementById('gear-content');
        const exposureContent = document.getElementById('exposure-content');
        
        const btnPrev = document.getElementById('btn-prev');
        const btnNext = document.getElementById('btn-next');
        const btnExport = document.getElementById('btn-export');

        const modalQuote = document.getElementById('modal-quote');
        const modalInner = document.getElementById('modal-inner');
        const quoteText = document.getElementById('quote-text');
        const btnCloseModal = document.getElementById('btn-close-modal');

        // --- EVENT LISTENERS ---
        dropZone.addEventListener('click', () => fileInput.click());
        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.classList.add('bg-gray-800');
        });
        dropZone.addEventListener('dragleave', (e) => {
            e.preventDefault();
            dropZone.classList.remove('bg-gray-800');
        });
        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.classList.remove('bg-gray-800');
            if (e.dataTransfer.files.length) {
                handleFiles(e.dataTransfer.files);
            }
        });
        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length) {
                handleFiles(e.target.files);
            }
        });

        // New Click Listener for Preview Image to Open in New Tab
        previewImg.addEventListener('click', (e) => {
            e.stopPropagation(); // Stop bubbling to dropZone which would trigger file input
            if (previewImg.src) {
                const w = window.open("");
                if (w) {
                    w.document.write(`
                        <html>
                            <head><title>IMG_VIEWER_V2077</title></head>
                            <body style="margin:0;background:#050a0e;display:flex;justify-content:center;align-items:center;height:100vh;">
                                <img src="${previewImg.src}" style="max-width:100%;max-height:100%;box-shadow:0 0 20px #00fff9;">
                            </body>
                        </html>
                    `);
                    w.document.close(); // Important for some browsers to finish loading
                }
            }
        });

        btnPrev.addEventListener('click', () => loadFile(currentIndex - 1));
        btnNext.addEventListener('click', () => loadFile(currentIndex + 1));
        btnExport.addEventListener('click', exportData);
        btnCloseModal.addEventListener('click', hideQuote);

        // --- CORE LOGIC ---

        function handleFiles(files) {
            // Filter images
            const validFiles = Array.from(files).filter(file => 
                file.type.match('image.*')
            );

            if (validFiles.length === 0) {
                updateStatus("ERROR: NO VALID IMAGES DETECTED.");
                return;
            }

            // If we already have files and new ones are added, append them? 
            // For simplicity, let's replace the list like standard gallery apps or the original py script logic per folder
            currentFiles = validFiles;
            currentIndex = 0;
            loadFile(0);
        }

        function loadFile(index) {
            if (index < 0) index = currentFiles.length - 1;
            if (index >= currentFiles.length) index = 0;
            
            currentIndex = index;
            const file = currentFiles[currentIndex];

            // UI Updates
            updateStatus(`ANALYZING TARGET: ${file.name}...`);
            updateButtons();
            
            // Preview
            const reader = new FileReader();
            reader.onload = (e) => {
                previewImg.src = e.target.result;
                previewImg.classList.remove('hidden');
                dropHint.classList.add('hidden');
                
                // Once image loads, parse EXIF
                // We use the Image object for EXIF.js
                previewImg.onload = () => {
                   parseExif(previewImg, file);
                };
            };
            reader.readAsDataURL(file);
        }

        function parseExif(imgElement, file) {
            EXIF.getData(imgElement, function() {
                const allData = EXIF.getAllTags(this);
                processExifData(allData, file, imgElement.naturalWidth, imgElement.naturalHeight);
            });
        }

        function processExifData(exif, file, width, height) {
            // Safe Getters
            const get = (key) => exif[key] ? exif[key] : null;

            // 1. Exposure Mode
            let expModeStr = "ä½ äº‚æ‹å°å§?";
            if (get('ExposureProgram')) {
                const mode = get('ExposureProgram');
                // EXIF.js usually returns numbers or strings depending on version. 
                // Standard EXIF: 1=Manual, 2=Program, 3=Aperture Priority, 4=Shutter Priority
                // Sometimes EXIF.js parses it to string. Let's handle generic values or raw numbers.
                // Note: The original py script checks integers.
                const mVal = parseInt(mode);
                if (mVal === 1) expModeStr = "M = Magic Modeï¼ˆé­”æ³•æ¨¡å¼ï¼‰ ğŸ‘‰ æ–°æ‰‹ä»¥ç‚ºé€²å»æœƒè‡ªå‹•è®Šå¼·";
                else if (mVal === 2) expModeStr = "P = Pray Modeï¼ˆç¥ˆç¦±æ¨¡å¼ï¼‰ ğŸ‘‰ å¸Œæœ›ç›¸æ©Ÿæ‡‚æˆ‘";
                else if (mVal === 3) expModeStr = "Av = Art Vision æ¨¡å¼ï¼ˆè—è¡“è¦–è§’ï¼‰ ğŸ‘‰ èƒŒæ™¯èƒ½ç³Šå°±æ˜¯å¥½ç…§ç‰‡";
                else if (mVal === 4) expModeStr = "S = Stop That Motion æ¨¡å¼ ğŸ‘‰ ä¸å‡†å‹•ï¼";
                else expModeStr = "Auto = Blame the Camera Modeï¼ˆå‡ºäº‹æ€ªç›¸æ©Ÿï¼‰";
            }

            // 2. Date Sentiment
            const dateStr = get('DateTimeOriginal') || get('DateTime') || "";
            const dateAnalysis = analyzeDateSentiment(dateStr);

            // 3. Shutter Speed
            let shutterStr = "åˆ¥çœ‹é€™ï¼Œæ²’è³‡æ–™";
            if (get('ExposureTime')) {
                const val = parseFloat(get('ExposureTime'));
                if (val > 0) {
                    if (val < 1) shutterStr = `1/${Math.round(1/val)}`;
                    else shutterStr = `${val} ç§’`;
                }
            }

            // 4. Aperture
            let fStr = "å¤§æ¦‚æ²’è£é¡é ­å§?";
            if (get('FNumber')) {
                fStr = `f/${parseFloat(get('FNumber'))}`;
            }

            // 5. Focal Length
            let flStr = "æˆ‘ç´¯äº†";
            if (get('FocalLength')) {
                flStr = `${parseFloat(get('FocalLength'))} mm`;
            }

            // 6. Hyperfocal (Estimation)
            let hyperStr = "é€™ä½ ä¸éœ€è¦çŸ¥é“ï¼Œåæ­£ä½ ä¹Ÿä¸åœ¨ä¹";
            try {
                const fl = parseFloat(get('FocalLength'));
                const fn = parseFloat(get('FNumber'));
                if (fl > 0 && fn > 0) {
                    const hf = ((fl * fl) / (fn * 0.03) + fl) / 1000;
                    hyperStr = `${hf.toFixed(2)} m`;
                }
            } catch(e) {}

            // 7. ISO
            const isoVal = get('ISOSpeedRatings') || "æˆ‘è®€ä¸åˆ°åˆ¥å•æˆ‘";
            const isoStr = `ISO ${isoVal}`;

            // 8. GPS
            const gpsStr = (get('GPSLatitude') || get('GPSLongitude')) ? "åŒ…å«åº§æ¨™æ•¸æ“š" : "æˆ‘æ²’æœ‰ GPS ï¼Œä½ åˆ¥çœ‹äº†";

            // 9. Camera & Lens
            const make = (get('Make') || "").trim();
            const model = (get('Model') || "").trim();
            const camName = (make || model) ? `${make} ${model}` : "æˆ‘æ²’æœ‰åå­—";
            // Lens data is tricky in EXIF.js, often stored in MakerNotes which EXIF.js might not parse fully.
            // We'll try standard tags.
            const lensModel = get('LensModel') || get('UndefinedTag:0xA434') || "æˆ‘æ²’æœ‰çœ¼é¡";

            // Brand Quote
            const brandQuote = getBrandQuote(make, model);

            // File Size
            const sizeMB = (file.size / (1024 * 1024)).toFixed(2);

            // --- BUILD STRINGS ---
            const basicText = 
`DEVICE_NAME : ${camName}
LENS_MODEL  : ${lensModel}
CAPTURE_DATE: ${dateAnalysis}

RESOLUTION  : ${width} x ${height} (${(width*height/1000000).toFixed(1)} MP)
FILE_SIZE   : ${sizeMB} MB
GPS_STATUS  : ${gpsStr}
==============================`;

            const exposureText = 
`EXP_MODE    : ${expModeStr}
ISO_SPEED   : ${isoStr}
SHUTTER     : ${shutterStr}
APERTURE    : ${fStr}
FOCAL_LEN   : ${flStr}
HYPERFOCAL  : ${hyperStr}`;

            // --- RENDER ---
            gearContent.innerHTML = basicText + (brandQuote ? `\n\n<span class="text-yellow-400 font-bold">${brandQuote}</span>` : "");
            exposureContent.innerText = exposureText;
            updateStatus("ANALYSIS COMPLETE. DATA READY.");

            // Cache data for export
            currentExifCache = {
                filename: file.name,
                basic: basicText + (brandQuote ? `\n${brandQuote}` : ""),
                exposure: exposureText
            };

            // Show Random Quote (Logic: Every 5th image viewed)
            viewCount++;
            if (viewCount % 5 === 0) {
                showRandomQuote();
            }
        }

        // --- HELPERS ---

        function getBrandQuote(make, model) {
            const makeS = make.toLowerCase();
            const modelS = model.toLowerCase();
            
            // Special Sony case
            if (makeS.includes("sony")) {
                if (modelS.includes("xperia")) return "Sonyï¼ˆç´¢å°¼ï¼‰\nğŸ‘‰ ã€Œç›¸æ©Ÿéƒ¨é–€å¾ˆå¼·ï¼Œä½†æ‰‹æ©Ÿåªæƒ³åšçµ¦æ‡‚çš„äººã€‚ã€";
                return "Sonyï¼ˆç´¢å°¼ï¼‰\nğŸ‘‰ ã€ŒSonyï¼šå°ç„¦æ¯”ä½ äººç”Ÿç›®æ¨™é‚„å¿«ã€‚ã€";
            }

            for (const [key, value] of Object.entries(BRAND_COMMENTS)) {
                if (makeS.includes(key)) return value;
            }
            return "";
        }

        function analyzeDateSentiment(dateStr) {
            if (!dateStr) return "æˆ‘æ²’æœ‰ç”Ÿæ—¥";
            // EXIF format is usually "YYYY:MM:DD HH:MM:SS"
            // Convert to standard format for parsing
            const cleanDateStr = dateStr.replace(/^(\d{4}):(\d{2}):(\d{2})/, '$1-$2-$3');
            const dateObj = new Date(cleanDateStr);
            
            if (isNaN(dateObj.getTime())) return `${dateStr} (DATA CORRUPTED)`;

            const year = dateObj.getFullYear();
            const mainDate = `${year}-${String(dateObj.getMonth()+1).padStart(2, '0')}-${String(dateObj.getDate()).padStart(2, '0')}`;
            
            let comment = "";
            if (year >= 2024) comment = "ã€Œé‚„åœ¨ä¿å›ºå…§ã€\nğŸ‘‰ è¨˜æ†¶æ–°é®®ã€ç¡¬ç¢Ÿé‚„æ²’å£\nğŸ‘‰ ã€Œé€™ä¸æ˜¯èˆŠç…§ï¼Œæ˜¯å›é¡§ã€";
            else if (year >= 2023) comment = "ã€Œæ™‚é–“éå¥½å¿«æ¨¡å¼ã€\nğŸ‘‰ æ‹çš„æ™‚å€™æ˜æ˜æ˜¯æ˜¨å¤©\nğŸ‘‰ ã€Œæ€éº¼å·²ç¶“å…©å¹´äº†ï¼Ÿã€";
            else if (year >= 2022) comment = "ã€Œç–«æƒ…å¾Œéºç…§ï¼ˆæƒ…æ„Ÿç‰ˆï¼‰ã€\nğŸ‘‰ äººé‚„åœ¨ï¼Œæ„Ÿè¦ºä¸ä¸€æ¨£äº†\nğŸ‘‰ ã€Œé‚£æ™‚å€™çš„æˆ‘ï¼Œå¥½ç˜¦ / å¥½å¤©çœŸã€";
            else if (year >= 2021) comment = "ã€Œæ™‚ä»£äº¤ç•Œç·šã€\nğŸ‘‰ æ‹ç…§è¨­å‚™å·²è¢«å«ŒèˆŠ\nğŸ‘‰ ã€Œé€™æ˜¯å‰ä¸€æ”¯æ‰‹æ©Ÿæ‹çš„ã€";
            else if (year >= 2020) comment = "ã€Œå“‡é ï¼Œå·²ç¶“äº”å¹´äº†ã€\nğŸ‘‰ æ­£å¼é€²å…¥æ‡·èˆŠå€\nğŸ‘‰ ã€Œé€™å¼µç¾åœ¨çœ‹æœ‰é»æ„Ÿæƒ…ã€";
            else if (year >= 2015) comment = "ã€Œç¶“å…¸è€ç…§ç‰‡ã€\nğŸ‘‰ æ¿¾é¡é–‹å§‹æœ‰å¹´ä»£æ„Ÿ\nğŸ‘‰ ã€Œé€™æ˜¯æˆ‘ä»¥å‰çš„é¢¨æ ¼ã€ï¼ˆ= ä¸æƒ³æ‰¿èªï¼‰";
            else if (year >= 2000) comment = "ã€Œæ­·å²æ–‡ä»¶ç­‰ç´šã€\nğŸ‘‰ äººç‰©å¤–å‹å·®å¾ˆå¤š\nğŸ‘‰ ã€Œé‚£æ™‚å€™å¤§å®¶éƒ½é€™æ¨£ç©¿ã€";
            else comment = "ã€Œè€ƒå¤ç¾å ´ã€\nğŸ‘‰ ç•«è³ªæ„Ÿäººã€è¡¨æƒ…çœŸèª \nğŸ‘‰ ã€Œé€™å¼µè¦å°å¿ƒæ‹¿ã€";

            return `${mainDate}\n\n[ æ™‚å…‰æ©Ÿåˆ†æ // TIME_MACHINE_LOG ]\n${comment}`;
        }

        function updateButtons() {
            btnPrev.disabled = currentFiles.length <= 1;
            btnNext.disabled = currentFiles.length <= 1;
            btnExport.disabled = false;
        }

        function updateStatus(msg) {
            statusText.textContent = `SYSTEM STATUS: ${msg}`;
        }

        function showRandomQuote() {
            const quote = SOUL_QUOTES[Math.floor(Math.random() * SOUL_QUOTES.length)];
            quoteText.textContent = quote;
            modalQuote.classList.remove('hidden');
            // Animation trigger
            setTimeout(() => {
                modalInner.classList.remove('scale-95', 'opacity-0');
                modalInner.classList.add('scale-100', 'opacity-100');
            }, 10);
        }

        function hideQuote() {
            modalInner.classList.remove('scale-100', 'opacity-100');
            modalInner.classList.add('scale-95', 'opacity-0');
            setTimeout(() => {
                modalQuote.classList.add('hidden');
            }, 300);
        }

        function exportData() {
            if (!currentExifCache.filename) return;
            
            const content = 
`// CYBERDECK EXIF ANALYSIS LOG //
TARGET_FILE: ${currentExifCache.filename}

[ GEAR_LIST ]
${currentExifCache.basic}

[ EXPOSURE_DATA ]
${currentExifCache.exposure}
`;
            const blob = new Blob([content], { type: "text/plain;charset=utf-8" });
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = `${currentExifCache.filename}_DATA_LOG.txt`;
            a.click();
            URL.revokeObjectURL(url);
            updateStatus("DATA EXPORTED SUCCESSFULLY.");
        }
    </script>
</body>
</html>