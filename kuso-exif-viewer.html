<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEO-TOKYO // EXIF_DECK v2.077_PATCHED</title>
    <!-- å¼•å…¥ Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&family=Orbitron:wght@400;700;900&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <!-- å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥ exif-js ç”¨æ–¼è®€å–ç…§ç‰‡è³‡è¨Š -->
    <script src="https://cdn.jsdelivr.net/npm/exif-js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        cyber: {
                            dark: "#050a0e",
                            frame: "#111827",
                            cyan: "#00fff9",
                            pink: "#fe0056",
                            yellow: "#fcec0c",
                            green: "#39ff14",
                            text: "#e0f7fa"
                        }
                    },
                    fontFamily: {
                        sans: ['"Noto Sans TC"', 'sans-serif'],
                        mono: ['"Share Tech Mono"', 'monospace'],
                        title: ['"Orbitron"', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #050a0e;
            color: #e0f7fa;
            overflow-x: hidden;
        }

        /* éœ“è™¹ç™¼å…‰æ•ˆæœ */
        .neon-border-cyan {
            box-shadow: 0 0 5px #00fff9, 0 0 10px #00fff9 inset;
        }
        .neon-text-cyan {
            text-shadow: 0 0 5px #00fff9;
        }
        .neon-border-pink {
            box-shadow: 0 0 5px #fe0056, 0 0 10px #fe0056 inset;
        }
        .neon-text-pink {
            text-shadow: 0 0 5px #fe0056;
        }
        .neon-border-yellow {
            box-shadow: 0 0 5px #fcec0c, 0 0 10px #fcec0c inset;
        }

        /* CRT æƒæç·šç‰¹æ•ˆ */
        .crt-overlay {
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 2px, 3px 100%;
            pointer-events: none;
        }

        /* æ»¾å‹•æ¢æ¨£å¼ */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #111827; 
        }
        ::-webkit-scrollbar-thumb {
            background: #00fff9; 
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #fe0056; 
        }

        .glitch-hover:hover {
            animation: glitch 0.3s cubic-bezier(.25, .46, .45, .94) both infinite;
            color: #fe0056;
        }

        @keyframes glitch {
            0% { transform: translate(0) }
            20% { transform: translate(-2px, 2px) }
            40% { transform: translate(-2px, -2px) }
            60% { transform: translate(2px, 2px) }
            80% { transform: translate(2px, -2px) }
            100% { transform: translate(0) }
        }

        /* éš±è—åŸç”Ÿ input */
        .hidden-input {
            display: none;
        }
        
        .typewriter-text {
            white-space: pre-wrap;
            font-family: 'Share Tech Mono', 'Noto Sans TC', monospace;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col font-sans crt-overlay">

    <!-- é ‚éƒ¨ Header -->
    <header class="w-full p-4 border-b border-cyber-cyan bg-cyber-dark z-10">
        <h1 class="text-2xl md:text-3xl font-title text-cyber-cyan text-center tracking-widest neon-text-cyan">
            [ N E O - T O K Y O // E X I F _ D E C K v2.077 ]
        </h1>
    </header>

    <!-- ä¸»å®¹å™¨ -->
    <main class="flex-grow container mx-auto p-4 md:p-6 grid grid-cols-1 lg:grid-cols-2 gap-6 relative">

        <!-- 1. åœ–ç‰‡é è¦½å€ -->
        <section id="drop-zone" class="lg:col-span-2 bg-cyber-frame border-2 border-cyber-cyan rounded-lg relative min-h-[300px] flex flex-col items-center justify-center overflow-hidden transition-all duration-300 hover:shadow-[0_0_15px_#00fff9]">
            
            <!-- è¨ˆæ•¸å™¨ -->
            <div id="image-counter" class="absolute top-2 right-2 text-cyber-yellow font-mono z-20 bg-black/70 px-3 py-1 rounded border border-cyber-yellow hidden">
                [ QUEUE: 0 / 0 ]
            </div>

            <!-- é è¨­æç¤º -->
            <div id="upload-hint" class="text-center p-8 z-10 w-full max-w-2xl">
                <p class="font-title text-xl md:text-2xl text-cyber-cyan mb-4 animate-pulse">>> æ‹–æ›³å½±åƒè³‡æ–™è‡³æ­¤è¼‰å…¥ <<</p>
                <div class="flex flex-col md:flex-row gap-4 justify-center items-center mt-6 w-full">
                    <button onclick="document.getElementById('file-input').click()" class="w-full md:w-auto px-6 py-2 border border-cyber-cyan text-cyber-cyan hover:bg-cyber-cyan hover:text-black transition-colors font-bold font-mono">
                        // é¸æ“‡æª”æ¡ˆ (å¤šé¸) //
                    </button>
                    <button onclick="document.getElementById('folder-input').click()" class="w-full md:w-auto px-6 py-2 border border-cyber-pink text-cyber-pink hover:bg-cyber-pink hover:text-black transition-colors font-bold font-mono">
                        // é¸æ“‡è³‡æ–™å¤¾ (æ‰¹æ¬¡) //
                    </button>
                </div>
                <p class="text-cyber-text opacity-70 font-mono text-sm mt-4">
                    [ æç¤ºï¼šè‹¥éœ€æ‰¹æ¬¡ç€è¦½ï¼Œè«‹æ‹–æ›³å¤šå€‹æª”æ¡ˆæˆ–ä½¿ç”¨è³‡æ–™å¤¾æŒ‰éˆ• ]
                </p>
            </div>

            <!-- åœ–ç‰‡é¡¯ç¤º -->
            <img id="preview-image" src="" alt="Preview" class="hidden max-h-[500px] w-auto object-contain p-2 z-10 pointer-events-auto cursor-pointer">
            
            <!-- Hover è­¦å‘Š -->
            <div id="hover-warning" class="hidden absolute pointer-events-none bg-cyber-yellow text-cyber-dark font-bold p-2 rounded z-20 shadow-lg whitespace-nowrap">
                [ è­¦å‘Šï¼šåµæ¸¬åˆ°æ‰‹æŒ‡è¼¸å…¥ ]<br>é»å•Šï¼Œä½ çµ¦æˆ‘é»å•Š
            </div>

            <input type="file" id="file-input" class="hidden-input" multiple accept="image/*" onchange="handleFiles(this.files)">
            <!-- æ”¯æ´è³‡æ–™å¤¾ä¸Šå‚³ (webkitdirectory) -->
            <input type="file" id="folder-input" class="hidden-input" multiple webkitdirectory directory onchange="handleFiles(this.files)">
        </section>

        <!-- é€²åº¦æ¢ -->
        <div id="progress-container" class="lg:col-span-2 hidden">
            <div class="w-full bg-cyber-dark border border-cyber-cyan h-2">
                <div id="progress-bar" class="bg-cyber-cyan h-full w-0 transition-all duration-300"></div>
            </div>
            <p class="text-xs text-cyber-cyan font-mono mt-1 animate-pulse">ANALYZING NEURAL LINK...</p>
        </div>

        <!-- 2. è£å‚™æ¸…å–® -->
        <section class="bg-cyber-frame border-2 border-cyber-yellow rounded-lg p-4 flex flex-col h-full min-h-[300px]">
            <h2 class="text-xl font-bold text-cyber-yellow mb-4 border-b border-cyber-yellow pb-2 font-title">
                [ è£å‚™æ¸…å–® // GEAR_LIST ]
            </h2>
            <div id="gear-list-content" class="typewriter-text text-cyber-text text-sm md:text-base flex-grow overflow-y-auto pr-2">
                <!-- å…§å®¹ç”± JS å¡«å…… -->
                <span class="opacity-50 text-gray-400">WAITING FOR DATA STREAM...</span>
            </div>
        </section>

        <!-- 3. å‰ä¸–ä»Šç”Ÿ -->
        <section class="bg-cyber-frame border-2 border-cyber-pink rounded-lg p-4 flex flex-col h-full min-h-[300px]">
            <h2 class="text-xl font-bold text-cyber-pink mb-4 border-b border-cyber-pink pb-2 font-title">
                [ å‰ä¸–ä»Šç”Ÿ // EXPOSURE_DATA ]
            </h2>
            <div id="exposure-data-content" class="typewriter-text text-cyber-text text-sm md:text-base flex-grow overflow-y-auto pr-2">
                <!-- å…§å®¹ç”± JS å¡«å…… -->
                <span class="opacity-50 text-gray-400">WAITING FOR DATA STREAM...</span>
            </div>
        </section>

        <!-- 4. æ§åˆ¶æŒ‰éˆ•å€ -->
        <section class="lg:col-span-2 flex flex-col md:flex-row gap-4 justify-between items-center mt-4">
            <button onclick="prevImage()" class="w-full md:w-1/4 py-3 bg-transparent border-2 border-cyber-cyan text-cyber-cyan font-bold rounded hover:bg-cyber-cyan hover:text-black transition-all font-title glitch-hover disabled:opacity-50 disabled:cursor-not-allowed">
                &lt; ä¸Šä¸€å¼µ
            </button>
            
            <button onclick="exportToTxt()" class="w-full md:w-1/2 py-3 bg-cyber-green text-black font-bold rounded shadow-[0_0_15px_#39ff14] hover:bg-white transition-all font-title transform hover:scale-105">
                >> è¼¸å‡ºç…§ç‰‡èº«ä»½è­‰ <<
            </button>

            <button onclick="nextImage()" class="w-full md:w-1/4 py-3 bg-transparent border-2 border-cyber-cyan text-cyber-cyan font-bold rounded hover:bg-cyber-cyan hover:text-black transition-all font-title glitch-hover disabled:opacity-50 disabled:cursor-not-allowed">
                ä¸‹ä¸€å¼µ &gt;
            </button>
        </section>

    </main>

    <!-- åº•éƒ¨ç‹€æ…‹åˆ— -->
    <footer class="w-full bg-black p-2 border-t border-gray-800 mt-6">
        <p id="system-status" class="text-xs font-mono text-cyber-cyan">SYSTEM STATUS: WAITING FOR INPUT...</p>
    </footer>

    <!-- éš¨æ©Ÿé‡‘å¥å½ˆè·³è¦–çª— (Modal) -->
    <div id="quote-modal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-80 z-50 hidden" onclick="closeModal()">
        <div class="bg-cyber-frame border-2 border-cyber-pink w-[90%] max-w-lg p-1 shadow-[0_0_30px_#fe0056] transform scale-95 transition-transform duration-200" onclick="event.stopPropagation()">
            <div class="border border-cyber-pink p-6 flex flex-col items-center text-center">
                <h3 class="text-cyber-pink font-mono mb-4 text-lg">
                    // SYSTEM_OVERRIDE // éˆé­‚æ‹·å•ç¨‹åºå•Ÿå‹• //
                </h3>
                <p id="quote-text" class="text-cyber-text text-xl md:text-2xl font-bold mb-8 leading-relaxed">
                    <!-- æ¯’é›æ¹¯ -->
                </p>
                <p class="text-cyber-yellow font-bold text-lg animate-pulse cursor-pointer hover:underline" onclick="closeModal()">
                    [ é»æ“Šä»»æ„è™•é—œé–‰ ]
                </p>
            </div>
        </div>
    </div>

    <!-- JavaScript é‚è¼¯ -->
    <script>
        // --- è³‡æ–™åº« (ä¿æŒä¸è®Š) ---
        const SOUL_QUOTES = [
            "ä½ ä¸æ˜¯å‡ç´šå™¨æï¼Œæ˜¯å»¶å¾Œé¢å°å¯¦åŠ›", "é˜²æ½®ç®±æ˜¯æ”å½±å¸«çš„å¤¢æƒ³å†°æ«ƒ", "å™¨æå…¨æ–°ï¼Œä½œå“å…¨ç„¡",
            "é¡é ­è¶Šè²´ï¼Œè¶Šä¸æ•¢å¸¶å‡ºé–€", "é¡é ­æ¯”ä½ çš„äººç”Ÿè¦åŠƒæ¸…æ¥š", "é–‹ç®±æ‹å¾—æ¯”ä½œå“èªçœŸ",
            "å™¨æè²·é½Šäº†ï¼Œæ‹ç…§é‚„åœ¨æ‰¾é¡Œæ", "ä½ ä¸æ˜¯å™¨æé»¨ï¼Œæ˜¯é€ƒé¿é»¨", "ç›¸æ©ŸçŸ¥é“ä½ å¾ˆçª®ï¼Œä½†ä½ è£ä½œä¸åœ¨ä¹",
            "æŠ€è¡“æ²’é€²æ­¥ï¼Œä½†é…ä»¶è¶Šä¾†è¶Šé½Š", "å…¨æ‰‹å‹•åªæ˜¯è®“éŒ¯èª¤æ›´æœ‰å°Šåš´", "ç”¨ M æ¨¡å¼æ‹çˆ›ï¼Œä¸æœƒæ¯”è¼ƒé«˜ç´š",
            "å…‰åœˆå…¨é–‹ä¸æ˜¯é¢¨æ ¼ï¼Œæ˜¯å¤±æ§", "å¿«é–€äº‚è½‰ï¼Œæ¨¡ç³Šç•¶å“²å­¸", "ISO çˆ†è¡¨ï¼Œå«æƒ…ç·’",
            "ä¸æœƒæ¸¬å…‰ï¼Œå»æ„›è«‡å…‰", "åƒæ•¸èƒŒå¾—ç†Ÿï¼Œç•«é¢é‚„æ˜¯æ­»", "ä½ åœ¨æ§åˆ¶ç›¸æ©Ÿï¼Œç›¸æ©Ÿåœ¨æ‡²ç½°ä½ ",
            "æ›å…‰è£œå„Ÿæ˜¯ä½ æœ€å¾Œçš„å¸Œæœ›", "ç™½å¹³è¡¡äº‚è·‘ï¼Œè‰²å½©é‚„æ•¢èªªã€Œè‡ªç„¶ã€", "æ¨¡ç³Šä¸æ˜¯è©©ï¼Œæ˜¯æ²’å°ç„¦",
            "é»‘ç™½ä¸æ˜¯æ·±åº¦ï¼Œæ˜¯é®ç¾", "æ¥µç°¡ä¸æ˜¯ä»€éº¼éƒ½æ²’æ‹åˆ°", "ç•™ç™½ç•™åˆ°åƒæ²’èµ°è¿‘",
            "å°ç¨±ä¸æ˜¯æ§‹åœ–ï¼Œæ˜¯æ€•å‡ºéŒ¯", "ä¸­å¤®æ§‹åœ–ç”¨ä¸€è¼©å­ï¼Œé‚„èªªæ˜¯é¢¨æ ¼", "å‰æ™¯äº‚æ”¾å«è¨­è¨ˆ",
            "å»£è§’è²¼è‡‰å«éœ‡æ’¼", "èƒŒæ™¯äº‚ä¸æ˜¯ç´€å¯¦ï¼Œæ˜¯ä¸è² è²¬", "çœ‹ä¸æ‡‚ä¸æ˜¯é«˜ç´šï¼Œæ˜¯æ²’èªªæ¸…æ¥š",
            "æ¨¡ç‰¹æ¼‚äº®ï¼Œä¸æ˜¯ä½ çš„åŠŸå‹", "æ•£æ™¯ä¸æ˜¯æƒ…æ„Ÿï¼Œæ˜¯èƒŒæ™¯ç³Šæ‰", "çœ¼ç¥ç©ºï¼Œä¸æ˜¯æ†‚é¬±ï¼Œæ˜¯æ²’å¼•å°",
            "æ¨¡ç‰¹åœ¨æ’ï¼Œä½ åœ¨è‡ªçˆ½", "å§¿å‹¢ä¸€æ¨£ï¼Œåªæ˜¯æ›äºº", "ä¿®çš®ä¿®åˆ°åƒå¡‘è† ï¼Œé‚„èªªçœŸå¯¦",
            "äººåƒä¸æ˜¯æ‹è‡‰éƒ¨è­‰ä»¶", "æ¨¡ç‰¹æ•‘äº†ä½ ï¼Œä½ é‚„ä»¥ç‚ºæ˜¯è‡ªå·±", "å·æ‹ä¸æ˜¯è¡—æ‹ï¼Œæ˜¯æ²’å‹‡æ°£",
            "è¢«æ‹’æ‹å°±èªªè‡ªå·±åœ¨åšè—è¡“", "å¾Œè£½ä¸æ˜¯å‰µä½œï¼Œæ˜¯æ€¥æ•‘", "æ¿¾é¡æ¯”å…§å®¹é‡",
            "é¡è‰²å¾ˆçŒ›ï¼Œæƒ…ç·’ç‚ºé›¶", "ä¿®åˆ°ä¸åƒäººï¼Œé‚„èªªè‡ªç„¶", "Lightroom ä¸æ˜¯è´–ç½ªåˆ¸",
            "ä¿®åœ–ä¿®åˆ°å¿˜è¨˜åŸæœ¬æƒ³æ‹ä»€éº¼", "å°æ¯”æ‹‰æ»¿ï¼Œæ•…äº‹æ¶ˆå¤±", "ä¸€éµé¢¨æ ¼ä¸æ˜¯é¢¨æ ¼",
            "HDR ä¸æ˜¯è®“äººçœ¼ç›æµè¡€", "å¾Œè£½æ™‚é–“æ¯”æ€è€ƒæ™‚é–“é•·", "æ²’é¢¨æ ¼ä¸å«å¤šå…ƒ",
            "æ¨¡ä»¿å¤ªåƒï¼Œå°±æ˜¯æŠ„", "æ¯å¼µéƒ½ä¸åŒï¼Œå…¶å¯¦éƒ½ä¸è¡Œ", "é»‘æš—ä¸æ˜¯æ·±æ²‰ï¼Œæ˜¯ç©º",
            "é¢¨æ ¼ä¸æ˜¯ä½ èªªäº†ç®—ï¼Œæ˜¯ä½œå“èªªäº†ç®—", "æ‹å¾ˆå¤šï¼Œä¸ä»£è¡¨æ‹å¾—å¥½", "å¿«é–€ç´¯ç©ï¼Œä¸ç­‰æ–¼æˆé•·",
            "ä½ èªªåœ¨æ‰¾é¢¨æ ¼ï¼Œå…¶å¯¦åœ¨æ‹–", "ä½œå“é›†åƒè·³èš¤å¸‚å ´", "ä½ è©²åˆªçš„æ¯”è©²ç•™çš„å¤š",
            "è®šå¤šä¸æ˜¯è­‰æ˜ï¼Œåªæ˜¯é‹æ°£", "è®šå°‘ä¹Ÿä¸ä»£è¡¨ä½ æ˜¯è—è¡“å®¶", "æ¼”ç®—æ³•ä¸æ˜¯ä½ çš„æ•µäººï¼Œæ˜¯ç…§å¦–é¡",
            "è¢«åˆ†äº«ä¸ä»£è¡¨è¢«ç†è§£", "æµé‡ä¾†å¾—å¿«ï¼Œä½ ä¹Ÿç©ºå¾—å¿«", "æ¨™ç±¤ä¸‹å¾—æº–ï¼Œç…§ç‰‡é‚„æ˜¯çˆ›",
            "æ–‡æ¡ˆæ¯”ç…§ç‰‡ç²¾å½©", "ç‚ºäº†æµé‡æ‹ï¼Œæœ€å¾Œåªå‰©æµé‡", "ç†±é–€æ§‹åœ–ä¸æ˜¯ä½ çš„é¢¨æ ¼",
            "æ¯å¼µéƒ½æƒ³çˆ†ï¼Œå…¶å¯¦æ²’ä¸€å¼µç«™å¾—ä½", "æ‹å¾ˆä¹…ï¼Œä¸ä»£è¡¨ä½ é€²æ­¥", "è€æ‰‹äº‚æ‹ï¼Œæ–°æ‰‹çœ‹ä¸å‡ºä¾†",
            "æ–°æ‰‹æ‹å¾—å¥½ï¼Œå°±æ˜¯å¥½", "è½ä¸é€²æ‰¹è©•çš„äººæœ€å±éšª", "ä¸€ç›´è¾¯è§£ï¼Œä»£è¡¨ä½ çŸ¥é“ä¸è¡Œ",
            "æ€ªå™¨æçš„äººä¸æƒ³é¢å°è‡ªå·±", "è‡ªç¨±è—è¡“å®¶çš„äººé€šå¸¸æœ€æ€•è¢«çœ‹æ‡‚", "æ”å½±ä¸æ˜¯é ­éŠœ",
            "æ‹ç…§ä¸æ˜¯é€ƒé¿æ€è€ƒ", "ç›¸æ©Ÿä¸æœƒå¹«ä½ åšé¸æ“‡", "å¥½ç…§ç‰‡ä¸ç”¨è§£é‡‹",
            "è§£é‡‹è¶Šå¤šï¼Œç…§ç‰‡è¶Šå¼±", "çœ‹ä¸å‡ºä½ æƒ³æ‹ä»€éº¼", "ã€Œæœ‰æ„Ÿè¦ºä½†èªªä¸å‡ºä¾†ã€ï¼æ²’å®Œæˆ",
            "æŠ€è¡“åˆ°ä½ï¼Œå…§å®¹ç¼ºå¸­", "æ‹å¾—æ¸…æ¥šï¼Œä¸ç­‰æ–¼æ‹å¾—å¥½", "ä½ å¾ˆåŠªåŠ›ï¼Œä½†ç…§ç‰‡æ²’æ”¶åˆ°",
            "ç›¸æ©Ÿå¾ˆé«˜ç´šï¼Œç…§ç‰‡å¾ˆæ™®é€š", "é€™å¼µä¸æ˜¯çˆ›ï¼Œæ˜¯æµªè²»", "æ²’å¤±æ•—ï¼Œä¸ä»£è¡¨æˆåŠŸ",
            "å¥½ç…§ç‰‡ä¸éœ€è¦å¾ˆå¤š", "åå¼µä¸€å¼µå°±å¾ˆå¼·", "åˆªç…§ç‰‡ä¹Ÿæ˜¯å‰µä½œ",
            "æ‹ç…§æ˜¯é¸æ“‡ï¼Œä¸æ˜¯å…¨æ”¶", "ä¸æ‹ï¼Œæœ‰æ™‚æ¯”äº‚æ‹å¥½", "ç›¸æ©Ÿæœƒéæ™‚ï¼Œçœ¼ç›ä¸æœƒ",
            "çœ‹å¾—å°‘ï¼Œæ‹å†å¤šéƒ½æ²’ç”¨", "ä½ æœ€å¾Œåªæœƒæ‹çµ¦è‡ªå·±çœ‹", "æ”å½±ä¸æ˜¯è­‰æ˜ä½ æœ‰å¤šå²å®³",
            "æ‹ç…§ï¼Œæœ€å¾Œæ˜¯åœ¨å°ä»˜è‡ªå·±"
        ];

        const BRAND_COMMENTS = {
            "canon": "Canonï¼ˆä½³èƒ½ï¼‰\nğŸ‘‰ ã€Œä½³èƒ½ï¼šå¤§å®¶ç¬¬ä¸€å°ç›¸æ©Ÿï¼Œè€å¸«ã€è¨˜è€…ã€å©šæ”éƒ½ç”¨å®ƒã€‚ã€",
            "nikon": "Nikonï¼ˆå°¼åº·ï¼‰\nğŸ‘‰ ã€Œå°¼åº·ï¼šæˆ‘ä¸è·Ÿæµè¡Œï¼Œæˆ‘åªè·Ÿå…‰ç·šè¬›é“ç†ã€‚ã€",
            "fujifilm": "Fujifilmï¼ˆå¯Œå£«ï¼‰\nğŸ‘‰ ã€Œå¯Œå£«ï¼šå“‡ï¼Œä½ æ˜¯å¯Œå®¶å­å¼Ÿï¼Œé€£é¡è‰²éƒ½å¾ˆæœ‰æ•™é¤Šã€‚ã€",
            "panasonic": "Panasonicï¼ˆæ¾ä¸‹ï¼‰\nğŸ‘‰ ã€Œæ¾ä¸‹ï¼šæˆ‘æ‹ç…§é‚„è¡Œï¼Œä½†æˆ‘å…¶å¯¦æ˜¯ä¾†æ‹é›»å½±çš„ã€‚ã€",
            "olympus": "OM System / Olympus\nğŸ‘‰ ã€Œå¥§æ—å·´æ–¯ï¼šæˆ‘å¾ˆå°ï¼Œä½†æˆ‘é™ªä½ ä¸Šå±±ä¸‹æµ·ã€‚ã€",
            "om digital": "OM System / Olympus\nğŸ‘‰ ã€Œå¥§æ—å·´æ–¯ï¼šæˆ‘å¾ˆå°ï¼Œä½†æˆ‘é™ªä½ ä¸Šå±±ä¸‹æµ·ã€‚ã€",
            "leica": "Leicaï¼ˆå¾ å¡ï¼‰\nğŸ‘‰ ã€Œå¾ å¡ï¼šä½ è²·çš„ä¸æ˜¯ç›¸æ©Ÿï¼Œæ˜¯ä¿¡ä»°èˆ‡ç´…é»ã€‚ã€",
            "pentax": "Pentaxï¼ˆè³“å¾—ï¼‰\nğŸ‘‰ ã€Œè³“å¾—ï¼šå¤§å®¶éƒ½å¿˜äº†æˆ‘ï¼Œä½†æˆ‘è‡ªå·±å¾ˆé©•å‚²ã€‚ã€",
            "hasselblad": "Hasselbladï¼ˆå“ˆè˜‡ï¼‰\nğŸ‘‰ ã€Œå“ˆè˜‡ï¼šæˆ‘ä¸€å¼µç…§ç‰‡ï¼Œç­‰æ–¼ä½ ä¸€å°é›»è…¦ã€‚ã€",
            "blackmagic": "Blackmagic Design\nğŸ‘‰ ã€ŒBlackmagicï¼šæ‹ç…§ï¼Ÿä¸ï¼Œæˆ‘åªæ´»åœ¨å‰ªæ¥è»Ÿé«”è£¡ã€‚ã€",
            "phase one": "Phase One\nğŸ‘‰ ã€ŒPhase Oneï¼šæ™®é€šäººä¸èªè­˜æˆ‘ï¼Œæœ‰éŒ¢äººä¸éœ€è¦è§£é‡‹ã€‚ã€",
            "gopro": "GoPro\nğŸ‘‰ ã€ŒGoProï¼šä½ åœ¨è·³å‚˜ï¼Œæˆ‘åœ¨å¹«ä½ ç•™éºç…§ã€‚ã€",
            "dji": "DJI\nğŸ‘‰ ã€ŒDJIï¼šæˆ‘æœ¬ä¾†æ˜¯ç„¡äººæ©Ÿï¼Œé †ä¾¿çµ±æ²»å½±åƒç•Œã€‚ã€",
            "insta360": "Insta360\nğŸ‘‰ ã€ŒInsta360ï¼šå…ˆæ‹å†èªªï¼Œåæ­£è§’åº¦ä¹‹å¾Œå†é¸ã€‚ã€",
            "kodak": "Kodakï¼ˆæŸ¯é”ï¼‰\nğŸ‘‰ ã€ŒæŸ¯é”ï¼šæˆ‘æ²’è½äº†ï¼Œä½†ä½ çš„é’æ˜¥æœ‰æˆ‘ã€‚ã€",
            "agfa": "AgfaPhoto\nğŸ‘‰ ã€ŒAgfaPhotoï¼šä½ ä¸çŸ¥é“æˆ‘æ˜¯èª°ï¼Œä½†æˆ‘ä¸€ç›´éƒ½åœ¨ã€‚ã€",
            "benq": "BenQï¼ˆæ˜åŸºï¼‰\nğŸ‘‰ ã€ŒBenQï¼šæˆ‘è¢å¹•å¾ˆå¼·ï¼Œç›¸æ©Ÿâ€¦ä¹Ÿç®—æœ‰èª æ„ã€‚ã€",
            "aigo": "Aigoï¼ˆæ„›åœ‹è€…ï¼‰\nğŸ‘‰ ã€ŒAigoï¼šåå­—å¾ˆç†±è¡€ï¼Œåƒ¹æ ¼æ›´ç†±è¡€ã€‚ã€",
            "flashback": "Flashback\nğŸ‘‰ ã€ŒFlashbackï¼šæˆ‘ä¸æ˜¯è€ï¼Œæ˜¯æ•…æ„å¾©å¤ã€‚ã€",
            "polaroid": "Polaroidï¼ˆå¯¶éº—ä¾†ï¼‰\nğŸ‘‰ ã€ŒPolaroidï¼šæ‹å®Œå°±å‡ºä¾†ï¼Œäººç”Ÿä¸èƒ½é‡ä¾†ã€‚ã€",
            "ricoh": "Ricohï¼ˆç†å…‰ï¼‰\nğŸ‘‰ ã€ŒRicohï¼šæ‡‚çš„äººå°±æ‡‚ï¼Œä¸æ‡‚çš„äººä¸€ç›´å•ç‚ºä»€éº¼ã€‚ã€",
            "rollei": "Rollei\nğŸ‘‰ ã€ŒRolleiï¼šå¾·åœ‹è€éˆé­‚ï¼Œæ•¸ä½æ–°èº«é«”ã€‚ã€",
            "vivitar": "Vivitar\nğŸ‘‰ ã€ŒVivitarï¼šåå­—å¾ˆéŸ¿ï¼Œå­˜åœ¨æ„Ÿå¾ˆä½›ã€‚ã€",
            "yashica": "Yashicaï¼ˆé›…è¥¿å¡ï¼‰\nğŸ‘‰ ã€ŒYashicaï¼šæˆ‘ä»¥å‰å¾ˆç´…ï¼Œç¾åœ¨é å›æ†¶ã€‚ã€",
            "z cam": "Z CAM\nğŸ‘‰ ã€ŒZ CAMï¼šä½ ä¸çŸ¥é“æˆ‘ï¼Œä½† Netflix å¯èƒ½çŸ¥é“ã€‚ã€",
            "apple": "Appleï¼ˆè˜‹æœï¼‰\nğŸ‘‰ ã€Œä½ è²·çš„ä¸æ˜¯æ‰‹æ©Ÿï¼Œæ˜¯ç”Ÿæ…‹ç³»å…¥å ´åˆ¸ã€‚ã€",
            "iphone": "Appleï¼ˆè˜‹æœï¼‰\nğŸ‘‰ ã€Œä½ è²·çš„ä¸æ˜¯æ‰‹æ©Ÿï¼Œæ˜¯ç”Ÿæ…‹ç³»å…¥å ´åˆ¸ã€‚ã€",
            "samsung": "Samsungï¼ˆä¸‰æ˜Ÿï¼‰\nğŸ‘‰ ã€Œå‹è™Ÿå¤šåˆ°é€£è‡ªå·±éƒ½éœ€è¦åˆ†é¡è¡¨ã€‚ã€",
            "google": "Googleï¼ˆPixelï¼‰\nğŸ‘‰ ã€Œç¡¬é«”æ™®é€šï¼Œä½†æˆ‘æ˜¯ AI è¦ªå…’å­ã€‚ã€",
            "pixel": "Googleï¼ˆPixelï¼‰\nğŸ‘‰ ã€Œç¡¬é«”æ™®é€šï¼Œä½†æˆ‘æ˜¯ AI è¦ªå…’å­ã€‚ã€",
            "xiaomi": "Xiaomiï¼ˆå°ç±³ï¼‰\nğŸ‘‰ ã€Œè¦æ ¼çµ¦æ»¿ï¼Œåƒ¹æ ¼çµ¦ç”œï¼Œåå­—ä¸€ç›´æ”¹ã€‚ã€",
            "oneplus": "OnePlusï¼ˆä¸€åŠ ï¼‰\nğŸ‘‰ ã€Œç•¶å¹´æ——è‰¦æ®ºæ‰‹ï¼Œç¾åœ¨è‡ªå·±è®Šæ——è‰¦ã€‚ã€",
            "motorola": "Motorolaï¼ˆæ‘©æ‰˜ç¾…æ‹‰ï¼‰\nğŸ‘‰ ã€Œæˆ‘é‚„æ´»è‘—ï¼Œè€Œä¸”æˆ‘æœƒæŠ˜ã€‚ã€",
            "vivo": "vivo\nğŸ‘‰ ã€Œæ‹äººåƒå¾ˆç¾ï¼Œåå­—æ°¸é æ‰“å°å¯«ã€‚ã€",
            "oppo": "OPPO\nğŸ‘‰ ã€Œå……é›»å¿«åˆ°ä½ é‚„æ²’æ‰¾å¥½æ’åº§å°±æ»¿äº†ã€‚ã€",
            "realme": "Realme\nğŸ‘‰ ã€Œæˆ‘å¹´è¼•ã€æˆ‘ä¾¿å®œã€æˆ‘ä¸€ç›´å‡ºæ–°æ©Ÿã€‚ã€",
            "iqoo": "iQOO\nğŸ‘‰ ã€Œæ€§èƒ½æ€ªç¸ï¼Œä½†åå­—åƒé›»ç«¶éšŠä¼ã€‚ã€",
            "nothing": "Nothing\nğŸ‘‰ ã€Œæˆ‘ä»€éº¼éƒ½æ²’æœ‰ï¼Œä½†ä½ å°±æ˜¯æœƒå¤šçœ‹å…©çœ¼ã€‚ã€",
            "infinix": "Infinix\nğŸ‘‰ ã€Œè¦æ ¼å¯«å¾—å¾ˆçŒ›ï¼Œåƒ¹æ ¼ä½åˆ°ä¸åƒçœŸçš„ã€‚ã€",
            "tecno": "Tecno\nğŸ‘‰ ã€Œä½ å¯èƒ½æ²’è½éæˆ‘ï¼Œä½†æˆ‘è³£å¾—æ¯”ä½ æƒ³åƒå¤šã€‚ã€",
            "honor": "Honorï¼ˆæ¦®è€€ï¼‰\nğŸ‘‰ ã€Œæˆ‘ä¸æ˜¯è¯ç‚ºï¼Œä½†å¤§å®¶ä¸€ç›´é€™æ¨£çœ‹æˆ‘ã€‚ã€",
            "nokia": "Nokiaï¼ˆè«¾åŸºäºï¼‰\nğŸ‘‰ ã€Œæ‰‹æ©Ÿæœƒå£ï¼Œä½†æˆ‘ä¸æœƒå€’ã€‚ã€",
            "htc": "HTC\nğŸ‘‰ ã€Œæˆ‘æ›¾ç¶“ç«™åœ¨ä¸–ç•Œä¹‹å·”ã€‚ã€"
        };

        // --- ç‹€æ…‹ç®¡ç† ---
        let filesQueue = [];
        let currentIndex = -1;
        let currentExifData = null;

        // --- DOM å…ƒç´  ---
        const dropZone = document.getElementById('drop-zone');
        const previewImg = document.getElementById('preview-image');
        const uploadHint = document.getElementById('upload-hint');
        const progressBar = document.getElementById('progress-bar');
        const progressContainer = document.getElementById('progress-container');
        const gearListEl = document.getElementById('gear-list-content');
        const exposureDataEl = document.getElementById('exposure-data-content');
        const statusLabel = document.getElementById('system-status');
        const modal = document.getElementById('quote-modal');
        const quoteText = document.getElementById('quote-text');
        const hoverWarning = document.getElementById('hover-warning');
        const imageCounter = document.getElementById('image-counter');

        // --- æ‹–æ›³é‚è¼¯ ---
        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.classList.add('border-cyber-pink');
        });

        dropZone.addEventListener('dragleave', (e) => {
            e.preventDefault();
            dropZone.classList.remove('border-cyber-pink');
        });

        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.classList.remove('border-cyber-pink');
            if (e.dataTransfer.files.length) {
                handleFiles(e.dataTransfer.files);
            }
        });

        // --- æ»‘é¼ æ‡¸åœé‚è¼¯ (è‡´æ•¬åŸä½œ) ---
        previewImg.addEventListener('mouseenter', (e) => {
            if (currentIndex !== -1) {
                hoverWarning.classList.remove('hidden');
                updateHoverPosition(e);
            }
        });

        previewImg.addEventListener('mousemove', (e) => {
            if (currentIndex !== -1) {
                updateHoverPosition(e);
            }
        });

        previewImg.addEventListener('mouseleave', () => {
            hoverWarning.classList.add('hidden');
        });

        function updateHoverPosition(e) {
            const rect = dropZone.getBoundingClientRect();
            let x = e.clientX - rect.left + 20;
            let y = e.clientY - rect.top + 20;
            
            // é‚Šç•Œæª¢æŸ¥
            if(x > rect.width - 200) x = rect.width - 200;
            if(y > rect.height - 50) y = rect.height - 50;

            hoverWarning.style.left = `${x}px`;
            hoverWarning.style.top = `${y}px`;
        }


        // --- æª”æ¡ˆè™•ç†ä¸»é‚è¼¯ ---
        function handleFiles(files) {
            // æ”¾å¯¬éæ¿¾æ¢ä»¶ï¼šé™¤äº† MIME typeï¼Œä¹Ÿæª¢æŸ¥å‰¯æª”å
            const validExtensions = ['.jpg', '.jpeg', '.png', '.tiff', '.webp', '.gif', '.bmp', '.heic'];
            
            const newFiles = Array.from(files).filter(f => {
                const isMime = f.type.startsWith('image/');
                const name = f.name.toLowerCase();
                // æœ‰äº›ç³»çµ± MIME type åˆ¤æ–·ä¸å‡†ï¼Œè£œå¼·å‰¯æª”ååˆ¤æ–·
                const isExt = validExtensions.some(ext => name.endsWith(ext));
                return isMime || isExt;
            });

            if (newFiles.length === 0) {
                alert("æœªåµæ¸¬åˆ°æ”¯æ´çš„å½±åƒæ ¼å¼ // NO VALID IMAGES DETECTED\nè«‹ç¢ºèªæª”æ¡ˆæ˜¯å¦ç‚ºåœ–ç‰‡ã€‚");
                return;
            }
            
            // å˜—è©¦ä¾ç…§æª”åæ’åº (æ¨¡æ“¬è³‡æ–™å¤¾é †åº)
            newFiles.sort((a, b) => a.name.localeCompare(b.name, undefined, {numeric: true, sensitivity: 'base'}));

            filesQueue = newFiles;
            currentIndex = 0;
            
            updateCounter();
            processImage(filesQueue[currentIndex]);
        }

        function updateCounter() {
            if (filesQueue.length > 0) {
                imageCounter.classList.remove('hidden');
                imageCounter.innerText = `[ QUEUE: ${currentIndex + 1} / ${filesQueue.length} ]`;
            } else {
                imageCounter.classList.add('hidden');
            }
        }

        function prevImage() {
            if (filesQueue.length === 0) return;
            currentIndex = (currentIndex - 1 + filesQueue.length) % filesQueue.length;
            updateCounter();
            processImage(filesQueue[currentIndex]);
        }

        function nextImage() {
            if (filesQueue.length === 0) return;
            currentIndex = (currentIndex + 1) % filesQueue.length;
            updateCounter();
            processImage(filesQueue[currentIndex]);
        }

        function processImage(file) {
            // UI é‡ç½®
            uploadHint.classList.add('hidden');
            previewImg.classList.add('hidden');
            progressContainer.classList.remove('hidden');
            progressBar.style.width = '10%';
            statusLabel.innerText = `ANALYZING TARGET: ${file.name}...`;

            const reader = new FileReader();
            reader.onload = function(e) {
                previewImg.src = e.target.result;
                previewImg.classList.remove('hidden');
                
                // æ¨¡æ“¬åˆ†æé€²åº¦
                setTimeout(() => { progressBar.style.width = '50%'; }, 200);

                // ä½¿ç”¨ EXIF.js
                EXIF.getData(file, function() {
                    const exifData = this.exifdata || {};
                    const width = this.naturalWidth || exifData.PixelXDimension || 0;
                    const height = this.naturalHeight || exifData.PixelYDimension || 0;
                    
                    analyzeData(exifData, file, width, height);
                    
                    progressBar.style.width = '100%';
                    setTimeout(() => { progressContainer.classList.add('hidden'); }, 500);
                    
                    // é¡¯ç¤ºéš¨æ©Ÿæ¯’é›æ¹¯
                    showRandomQuote();
                });
            };
            // è™•ç†è®€å–éŒ¯èª¤
            reader.onerror = function() {
                alert("æª”æ¡ˆè®€å–å¤±æ•—ï¼Œè«‹ç¢ºèªæª”æ¡ˆæ¬Šé™ã€‚");
                progressContainer.classList.add('hidden');
            };
            
            reader.readAsDataURL(file);
        }

        // --- æ•¸æ“šåˆ†ææ ¸å¿ƒ ---
        function analyzeData(data, file, width, height) {
            const make = data.Make ? data.Make.trim() : "";
            const model = data.Model ? data.Model.trim() : "";
            const camName = (make || model) ? `${make} ${model}` : "æˆ‘æ²’æœ‰åå­—";
            const lensMake = data.LensMake || "";
            const lensModel = data.LensModel || "";
            let lensName = `${lensMake} ${lensModel}`.trim();
            if (!lensName) lensName = "æˆ‘æ²’æœ‰çœ¼é¡";

            const dateTime = data.DateTimeOriginal || data.DateTime || "";
            const dateAnalysis = analyzeDateSentiment(dateTime);
            
            const sizeMB = (file.size / (1024 * 1024)).toFixed(2);
            // ç¶“ç·¯åº¦è½‰æ›ç¨å¾®è¤‡é›œï¼Œé€™è£¡ç°¡åŒ–åˆ¤æ–·
            const gpsStr = (data.GPSLatitude && data.GPSLongitude) ? "åŒ…å«åº§æ¨™æ•¸æ“š" : "æˆ‘æ²’æœ‰ GPS ï¼Œä½ åˆ¥çœ‹äº†";

            // å“ç‰Œæ¯’èˆŒ
            const brandQuote = getBrandQuote(make, model);

            // æ§‹å»º Gear List
            const basicText = `DEVICE_NAME : ${camName}
LENS_MODEL  : ${lensName}
CAPTURE_DATE: ${dateAnalysis}

RESOLUTION  : ${width} x ${height} (${(width * height / 1000000).toFixed(1)} MP)
FILE_SIZE   : ${sizeMB} MB
GPS_STATUS  : ${gpsStr}

==============================`;

            gearListEl.innerHTML = basicText + (brandQuote ? `<br><br><span class="text-cyber-yellow font-bold">${brandQuote}</span>` : "");

            // æ§‹å»º Exposure Data
            const exposureProgram = data.ExposureProgram;
            let expModeStr = "ä½ äº‚æ‹å°å§?";
            if (exposureProgram === 1) expModeStr = "M = Magic Modeï¼ˆé­”æ³•æ¨¡å¼ï¼‰ ğŸ‘‰ æ–°æ‰‹ä»¥ç‚ºé€²å»æœƒè‡ªå‹•è®Šå¼·";
            else if (exposureProgram === 2) expModeStr = "P = Pray Modeï¼ˆç¥ˆç¦±æ¨¡å¼ï¼‰ ğŸ‘‰ å¸Œæœ›ç›¸æ©Ÿæ‡‚æˆ‘";
            else if (exposureProgram === 3) expModeStr = "Av = Art Vision æ¨¡å¼ï¼ˆè—è¡“è¦–è§’ï¼‰ ğŸ‘‰ èƒŒæ™¯èƒ½ç³Šå°±æ˜¯å¥½ç…§ç‰‡";
            else if (exposureProgram === 4) expModeStr = "S = Stop That Motion æ¨¡å¼ ğŸ‘‰ ä¸å‡†å‹•ï¼";
            else expModeStr = "Auto = Blame the Camera Modeï¼ˆå‡ºäº‹æ€ªç›¸æ©Ÿï¼‰";

            const iso = data.ISOSpeedRatings || "æˆ‘è®€ä¸åˆ°åˆ¥å•æˆ‘";
            
            let shutterStr = "åˆ¥çœ‹é€™ï¼Œæ²’è³‡æ–™";
            if (data.ExposureTime) {
                const val = parseFloat(data.ExposureTime);
                if (val > 0) {
                    if (val < 1) shutterStr = `1/${Math.round(1/val)}`;
                    else shutterStr = `${val} ç§’`;
                }
            }

            let fStr = "å¤§æ¦‚æ²’è£é¡é ­å§?";
            if (data.FNumber) {
                fStr = `f/${parseFloat(data.FNumber)}`;
            }

            let flStr = "æˆ‘ç´¯äº†";
            if (data.FocalLength) {
                flStr = `${parseFloat(data.FocalLength)} mm`;
            }

            const wbMap = {0: "è‡ªå‹•", 1: "æ‰‹å‹•"};
            let wbStr = "è‰²å½©ä¸é‡è¦";
            if (data.WhiteBalance !== undefined) {
                wbStr = wbMap[data.WhiteBalance] || "å…¶ä»–";
            }

            let hyperStr = "é€™ä½ ä¸éœ€è¦çŸ¥é“ï¼Œåæ­£ä½ ä¹Ÿä¸åœ¨ä¹";
            try {
                const fl = parseFloat(data.FocalLength);
                const fn = parseFloat(data.FNumber);
                if (fl > 0 && fn > 0) {
                    const hf = ((Math.pow(fl, 2)) / (fn * 0.03) + fl) / 1000;
                    hyperStr = `${hf.toFixed(2)} m`;
                }
            } catch(e) {}

            const exposureText = `EXP_MODE    : ${expModeStr}
ISO_SPEED   : ISO ${iso}
SHUTTER     : ${shutterStr}
APERTURE    : ${fStr}
FOCAL_LEN   : ${flStr}
WHITE_BAL   : ${wbStr}
HYPERFOCAL  : ${hyperStr}`;

            exposureDataEl.innerText = exposureText;

            currentExifData = {
                filename: file.name,
                basic: basicText + (brandQuote ? "\n" + brandQuote : ""),
                exposure: exposureText
            };
            
            statusLabel.innerText = "ANALYSIS COMPLETE. DATA READY.";
        }

        // --- è¼”åŠ©é‚è¼¯ ---
        function getBrandQuote(make, model) {
            const makeS = String(make).toLowerCase();
            const modelS = String(model).toLowerCase();
            
            if (makeS.includes("sony")) {
                if (modelS.includes("xperia")) return "Sonyï¼ˆç´¢å°¼ï¼‰\nğŸ‘‰ ã€Œç›¸æ©Ÿéƒ¨é–€å¾ˆå¼·ï¼Œä½†æ‰‹æ©Ÿåªæƒ³åšçµ¦æ‡‚çš„äººã€‚ã€";
                return "Sonyï¼ˆç´¢å°¼ï¼‰\nğŸ‘‰ ã€ŒSonyï¼šå°ç„¦æ¯”ä½ äººç”Ÿç›®æ¨™é‚„å¿«ã€‚ã€";
            }

            for (const [key, value] of Object.entries(BRAND_COMMENTS)) {
                if (makeS.includes(key)) return value;
            }
            return "";
        }

        function analyzeDateSentiment(dateStr) {
            if (!dateStr || dateStr === "") return "æˆ‘æ²’æœ‰ç”Ÿæ—¥";
            const cleanDate = String(dateStr).replace(/^(\d{4}):(\d{2}):(\d{2})/, "$1-$2-$3");
            const dt = new Date(cleanDate);
            if (isNaN(dt.getTime())) return `${dateStr} (DATA CORRUPTED)`;

            const year = dt.getFullYear();
            const mainDate = `${year}-${String(dt.getMonth()+1).padStart(2,'0')}-${String(dt.getDate()).padStart(2,'0')}`;
            let comment = "";

            if (year >= 2024) comment = "ã€Œé‚„åœ¨ä¿å›ºå…§ã€\nğŸ‘‰ è¨˜æ†¶æ–°é®®ã€ç¡¬ç¢Ÿé‚„æ²’å£\nğŸ‘‰ ã€Œé€™ä¸æ˜¯èˆŠç…§ï¼Œæ˜¯å›é¡§ã€";
            else if (year >= 2023) comment = "ã€Œæ™‚é–“éå¥½å¿«æ¨¡å¼ã€\nğŸ‘‰ æ‹çš„æ™‚å€™æ˜æ˜æ˜¯æ˜¨å¤©\nğŸ‘‰ ã€Œæ€éº¼å·²ç¶“å…©å¹´äº†ï¼Ÿã€";
            else if (year >= 2022) comment = "ã€Œç–«æƒ…å¾Œéºç…§ï¼ˆæƒ…æ„Ÿç‰ˆï¼‰ã€\nğŸ‘‰ äººé‚„åœ¨ï¼Œæ„Ÿè¦ºä¸ä¸€æ¨£äº†\nğŸ‘‰ ã€Œé‚£æ™‚å€™çš„æˆ‘ï¼Œå¥½ç˜¦ / å¥½å¤©çœŸã€";
            else if (year >= 2021) comment = "ã€Œæ™‚ä»£äº¤ç•Œç·šã€\nğŸ‘‰ æ‹ç…§è¨­å‚™å·²è¢«å«ŒèˆŠ\nğŸ‘‰ ã€Œé€™æ˜¯å‰ä¸€æ”¯æ‰‹æ©Ÿæ‹çš„ã€";
            else if (year >= 2020) comment = "ã€Œå“‡é ï¼Œå·²ç¶“äº”å¹´äº†ã€\nğŸ‘‰ æ­£å¼é€²å…¥æ‡·èˆŠå€\nğŸ‘‰ ã€Œé€™å¼µç¾åœ¨çœ‹æœ‰é»æ„Ÿæƒ…ã€";
            else if (year >= 2015) comment = "ã€Œç¶“å…¸è€ç…§ç‰‡ã€\nğŸ‘‰ æ¿¾é¡é–‹å§‹æœ‰å¹´ä»£æ„Ÿ\nğŸ‘‰ ã€Œé€™æ˜¯æˆ‘ä»¥å‰çš„é¢¨æ ¼ã€ï¼ˆ= ä¸æƒ³æ‰¿èªï¼‰";
            else if (year >= 2000) comment = "ã€Œæ­·å²æ–‡ä»¶ç­‰ç´šã€\nğŸ‘‰ äººç‰©å¤–å‹å·®å¾ˆå¤š\nğŸ‘‰ ã€Œé‚£æ™‚å€™å¤§å®¶éƒ½é€™æ¨£ç©¿ã€";
            else comment = "ã€Œè€ƒå¤ç¾å ´ã€\nğŸ‘‰ ç•«è³ªæ„Ÿäººã€è¡¨æƒ…çœŸèª \nğŸ‘‰ ã€Œé€™å¼µè¦å°å¿ƒæ‹¿ã€";

            return `${mainDate}\n\n[ æ™‚å…‰æ©Ÿåˆ†æ // TIME_MACHINE_LOG ]\n${comment}`;
        }

        function showRandomQuote() {
            const quote = SOUL_QUOTES[Math.floor(Math.random() * SOUL_QUOTES.length)];
            quoteText.innerText = quote;
            modal.classList.remove('hidden');
        }

        function closeModal() {
            modal.classList.add('hidden');
        }

        function exportToTxt() {
            if (!currentExifData) {
                alert("NO DATA LOADED // ç„¡æ³•è¼¸å‡ºç©ºæ•¸æ“š");
                return;
            }
            
            const content = `// CYBERDECK EXIF ANALYSIS LOG //
TARGET_FILE: ${currentExifData.filename}

[ GEAR_LIST ]
${currentExifData.basic}

[ EXPOSURE_DATA ]
${currentExifData.exposure}
`;
            const blob = new Blob([content], { type: "text/plain;charset=utf-8" });
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = `${currentExifData.filename}_DATA_LOG.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert("æª”æ¡ˆå·²è¼¸å‡ºï¼Œå»æ‰¾å§ï¼Œæˆ‘éƒ½å­˜åœ¨ one peaceäº†");
        }
    </script>
</body>
</html>